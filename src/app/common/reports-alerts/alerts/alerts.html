<page-header [breadcrumbs]="[
        { label: 'Insurance & Claims System'},
        { label: 'Reports & Alerts' },
        { label: 'Alerts' }
    ]">
</page-header>
<section aria-label="Alerts">
    <h1 class="text-[var(--primary)] text-[24px] font-bold">Alerts</h1>
    <div class="flex justify-end custom-dropdown mt-4 lg:mt-6 lg:mb-6">
        <div class="filter">
            <button
                class="2xl:!w-[60px] 2xl:!h-[60px] !w-[48px] !h-[48px] !bg-white  !border !border-solid !border-[var(--card-border)] flex items-center justify-center"
                matIconButton [matMenuTriggerFor]="menu2" [matMenuTriggerRestoreFocus]="false"
                #menuTrigger="matMenuTrigger">
                <img class="min-w-[24px] min-h-[24px] m-auto" src="/img/icon/filter-blue.svg" alt="">
            </button>

            <mat-menu #menu2="matMenu" class="bg-white !min-w-[333px]" [hasBackdrop]="false">
                <div class="px-4 pt-2 border-b border-b-[var(--card-border)]" (click)="$event.stopPropagation()">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-[var(--primary)] text-[20px] font-semibold ">Filter</h2>
                        <img (click)="menuTrigger.closeMenu()" class="cursor-pointer min-w-[24px] min-h-[24px]"
                            src="/img/icon/cross.svg" alt="">
                    </div>
                </div>

                <div class="p-4 border-b border-b-[var(--card-border)]" (click)="$event.stopPropagation()">
                    <h6 class="text-[16px] font-semibold text-dark-gray mb-4">Module</h6>
                    <div class="flex flex-wrap gap-x-3 gap-y-1">
                        <div class="checkbox">
                            <mat-checkbox [disableRipple]="true" class="flat-checkbox"
                                [(ngModel)]="filters.submitted">Vehicle</mat-checkbox>
                        </div>
                        <div class="checkbox">
                            <mat-checkbox [disableRipple]="true" class="flat-checkbox"
                                [(ngModel)]="filters.inreview">Machines</mat-checkbox>
                        </div>
                        <div class="checkbox">
                            <mat-checkbox [disableRipple]="true" class="flat-checkbox"
                                [(ngModel)]="filters.approve">Building</mat-checkbox>
                        </div>
                        <div class="checkbox">
                            <mat-checkbox [disableRipple]="true" class="flat-checkbox"
                                [(ngModel)]="filters.approve">Equipments</mat-checkbox>
                        </div>
                    </div>
                </div>

                <div class="p-4 border-b border-b-[var(--card-border)]" (click)="$event.stopPropagation()">
                    <h6 class="text-[16px] font-semibold text-dark-gray mb-4">Report Type</h6>
                    <div class="flex flex-wrap gap-x-3 gap-y-1">
                        <div class="checkbox">
                            <mat-checkbox [disableRipple]="true" class="flat-checkbox"
                                [(ngModel)]="filters.submitted">Read</mat-checkbox>
                        </div>
                        <div class="checkbox">
                            <mat-checkbox [disableRipple]="true" class="flat-checkbox"
                                [(ngModel)]="filters.inreview">Unread</mat-checkbox>
                        </div>

                    </div>
                </div>
                <div class="px-4 pt-6 pb-3 flex justify-end gap-3 ">
                    <custom-button label="Cancel" (click)="menuTrigger.closeMenu()" matButton="outlined"
                        class="!min-h-[30px] !text-[14px] !font-semibold !rounded-[5px]">
                    </custom-button>
                    <custom-button label="Apply" (click)="applyFilters(menu)" matButton="filled"
                        class="!min-h-[30px] !text-[14px] !font-semibold !rounded-[5px]">
                    </custom-button>
                </div>
            </mat-menu>
        </div>
    </div>
    <custom-card class="mt-2 !p-0 overflow-hidden min-filter-height h-full">
        <div class="mat-elevation-z2 overflow-x-auto ">
            <table mat-table [dataSource]="dataSource" class="mat-elevation-z8 custom-table">

                <ng-container matColumnDef="alertId">
                    <th mat-header-cell *matHeaderCellDef>Alert ID</th>
                    <td mat-cell *matCellDef="let element"> {{element.alertId}} </td>
                </ng-container>

                <ng-container matColumnDef="dateTime">
                    <th mat-header-cell *matHeaderCellDef>Date & Time</th>
                    <td mat-cell *matCellDef="let element"> {{element.dateTime}} </td>
                </ng-container>

                <ng-container matColumnDef="message">
                    <th mat-header-cell *matHeaderCellDef>Message</th>
                    <td mat-cell *matCellDef="let element"> {{element.message}} </td>
                </ng-container>

                <ng-container matColumnDef="module">
                    <th mat-header-cell *matHeaderCellDef>Module</th>
                    <td mat-cell *matCellDef="let element"> {{element.module}} </td>
                </ng-container>

                <ng-container matColumnDef="referenceId">
                    <th mat-header-cell *matHeaderCellDef>Reference ID</th>
                    <td mat-cell *matCellDef="let element"> <span class="font-semibold">{{element.referenceId}}</span>
                    </td>
                </ng-container>

                <ng-container matColumnDef="alertType">
                    <th mat-header-cell *matHeaderCellDef>Alert Type</th>
                    <td mat-cell *matCellDef="let element"> {{element.alertType}} </td>
                </ng-container>

                <ng-container matColumnDef="status">
                    <th mat-header-cell *matHeaderCellDef> status </th>
                    <td mat-cell *matCellDef="let element" class="capitalize">
                        {{element.status}}
                    </td>
                </ng-container>

                <ng-container matColumnDef="action">
                    <th mat-header-cell *matHeaderCellDef> Action</th>
                    <td mat-cell *matCellDef="let element">
                        @if(element.status === 'read'){
                        <img class="w-8 h-8 mx-auto cursor-pointer" src="/img/icon/read.svg" alt="">
                        }
                        @if(element.status === 'unread'){
                        <img class="w-8 h-8 mx-auto cursor-pointer" src="/img/icon/unread.svg" alt="">
                        }
                    </td>
                </ng-container>


                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>
        </div>
    </custom-card>
</section>