<page-header [breadcrumbs]="[
        { label: 'Insurance & Claims System'},
        { label: 'Claims' },
        { label: 'Claims Approvals' }
    ]">
</page-header>
<section aria-label="Events">
    <h1 class="text-[var(--primary)] text-[24px] font-bold">Claim Approval Details</h1>
    <custom-card class="mt-2 lg:mt-4 !p-0 overflow-hidden min-height">
        <div class="p-6 border-b border-b-[var(--card-border)]">
            <div class="flex justify-between items-center">
                <div class="flex items-center gap-4">
                    <img (click)="goTo('/claims/claims-approvals')" src="img/back-btn.svg" alt="img"
                        class="cursor-pointer" />
                    <!-- <h5 class="text-[20px] font-semibold text-[var(--dark-gray)] mb-0">#CLM753</h5> -->
                </div>
                <custom-button (click)="openTemplateDialog(customTemplate)"
                    class="!min-h-[20px] !h-[32px] !rounded-[6px] !font-medium" matButton="outlined"
                    label="Events"></custom-button>
            </div>
        </div>

        <!-- Wizard section :: will come during the approval process -->
        <div class="px-6 py-4 mt-4 bg-[#F6F6F6]">
            <p class="text-[14px] font-normal text-dark-gray mb-3">Approved by HO Insurance Manager on 18 Aug 2025 |
                16:30:23</p>
            <p class="text-[14px] font-normal text-dark-gray mb-6">Approved by HO Insurance Coordinator on 18 Aug 2025 |
                10:01:16</p>
            <wizard-steps [steps]="[
                    'HO Insurance Coordinator', 
                    'HO Insurance Manager'
                ]" [activeStep]="2"></wizard-steps>
        </div>
        <!-- Wizard section :: will come during the approval process end -->
        <div class="p-6">
            <div class="grid 2xl:grid-cols-4 md:grid-cols-3 sm:grid-cols-2 grid-col-1 gap-x-3 gap-y-8">
                <div class="item">
                    <span class="text-[16px] font-medium text-med-gray block mb-4">Claim Status</span>
                    <h6 class="text-[20px] font-semibold text-[#FFC04C] mb-0">Pending</h6>
                </div>
                <div class="item">
                    <span class="text-[16px] font-medium text-med-gray block mb-4">Pending At</span>
                    <h6 class="text-[20px] font-semibold text-dark-gray mb-0">Pending at HO Insurance Coordinator</h6>
                </div>
            </div>
            <div class="grid 2xl:grid-cols-4 md:grid-cols-3 sm:grid-cols-2 grid-col-1 gap-x-3 gap-y-8 mt-8">
                <div class="item">
                    <span class="text-[16px] font-medium text-med-gray block mb-4">Company Code</span>
                    <h6 class="text-[20px] font-semibold text-dark-gray mb-0">12456</h6>
                </div>
                <div class="item">
                    <span class="text-[16px] font-medium text-med-gray block mb-4">Branch Code</span>
                    <h6 class="text-[20px] font-semibold text-dark-gray mb-0">12456</h6>
                </div>
                <div class="item">
                    <span class="text-[16px] font-medium text-med-gray block mb-4">Division Code</span>
                    <h6 class="text-[20px] font-semibold text-dark-gray mb-0">12456</h6>
                </div>
            </div>
            <div class="grid 2xl:grid-cols-4 md:grid-cols-3 sm:grid-cols-2 grid-col-1 gap-x-3 gap-y-8 mt-8">
                <div class="item">
                    <span class="text-[16px] font-medium text-med-gray block mb-4">Document Type</span>
                    <h6 class="text-[20px] font-semibold text-dark-gray mb-0">License Document</h6>
                </div>
            </div>
            <div class="upload-box border border-[#474747] border-dashed rounded-[30px] p-6 mt-8">
                <h5 class="block font-semibold text-[#474747] mb-6">Uploaded Policy Document</h5>
                <div class="flex flex-wrap gap-6">
                    <!-- Uploaded files -->
                    <div class="item flex flex-col gap-4 justify-center items-center">
                        <div class="relative w-[88px] h-[117px] border border-[#888888] rounded-[5px] overflow-hidden">
                            <img src="./img/invoice.jpeg" class="w-full h-full object-cover" />
                            <span
                                class="img-type absolute left-0 top-0 block font-semibold bg-[#474747] text-white text-[10px] rounded-[6px] rounded-t-none rounded-l-none px-[8px] py-[3px]">
                                PDF
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="grid 2xl:grid-cols-4 md:grid-cols-3 sm:grid-cols-2 grid-col-1 gap-x-3 gap-y-8 mt-8">
                <div class="item">
                    <span class="text-[16px] font-medium text-med-gray block mb-4">Policy Number</span>
                    <h6 class="text-[20px] font-semibold text-dark-gray mb-0">12456</h6>
                </div>
                <div class="item">
                    <span class="text-[16px] font-medium text-med-gray block mb-4">Policy Company Code</span>
                    <h6 class="text-[20px] font-semibold text-dark-gray mb-0">46125</h6>
                </div>
                <div class="item">
                    <span class="text-[16px] font-medium text-med-gray block mb-4">Policy Branch Code</span>
                    <h6 class="text-[20px] font-semibold text-dark-gray mb-0">46125</h6>
                </div>
                <div class="item">
                    <span class="text-[16px] font-medium text-med-gray block mb-4">Policy Division Code</span>
                    <h6 class="text-[20px] font-semibold text-dark-gray mb-0">46125</h6>
                </div>
                <div class="item">
                    <span class="text-[16px] font-medium text-med-gray block mb-4">Policy Location Code</span>
                    <h6 class="text-[20px] font-semibold text-dark-gray mb-0">46125</h6>
                </div>
                <div class="item">
                    <span class="text-[16px] font-medium text-med-gray block mb-4">Policy Document Type</span>
                    <h6 class="text-[20px] font-semibold text-dark-gray mb-0">Insurance Certificate</h6>
                </div>
                <div class="item">
                    <span class="text-[16px] font-medium text-med-gray block mb-4">Request Number</span>
                    <h6 class="text-[20px] font-semibold text-dark-gray mb-0">415263</h6>
                </div>
            </div>
            <div class="upload-box border border-[#474747] border-dashed rounded-[30px] p-6 mt-8">
                <h5 class="block font-semibold text-[#474747] mb-6">Uploaded Policy Document</h5>
                <div class="flex flex-wrap gap-6">
                    <!-- Uploaded files -->
                    <div class="item flex flex-col gap-4 justify-center items-center">
                        <div class="relative w-[88px] h-[117px] border border-[#888888] rounded-[5px] overflow-hidden">
                            <img src="./img/invoice.jpeg" class="w-full h-full object-cover" />
                            <span
                                class="img-type absolute left-0 top-0 block font-semibold bg-[#474747] text-white text-[10px] rounded-[6px] rounded-t-none rounded-l-none px-[8px] py-[3px]">
                                PDF
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mt-8">
                <span class="text-[16px] font-medium text-med-gray block mb-4">Assets</span>
                <custom-chips [hideButton]="true" [chips]="selectedAssets"
                    (remove)="removeAssets($event)"></custom-chips>
            </div>
            <div class="grid 2xl:grid-cols-4 md:grid-cols-3 sm:grid-cols-2 grid-col-1 gap-x-3 gap-y-8 mt-8">
                <div class="item">
                    <span class="text-[16px] font-medium text-med-gray block mb-4">Incident Location</span>
                    <h6 class="text-[20px] font-semibold text-dark-gray mb-0">Sky Courts, Dubai</h6>
                </div>
                <div class="item">
                    <span class="text-[16px] font-medium text-med-gray block mb-4">Incident Date & Time</span>
                    <h6 class="text-[20px] font-semibold text-dark-gray mb-0">20 Aug 25 11:15</h6>
                </div>
                <div class="item">
                    <span class="text-[16px] font-medium text-med-gray block mb-4">Incident Report No.</span>
                    <h6 class="text-[20px] font-semibold text-dark-gray mb-0">145695621</h6>
                </div>
            </div>
            <div class="mt-8">
                <div class="item">
                    <span class="text-[16px] font-medium text-med-gray block mb-4">Incident Description</span>
                    <p class="text-[16px] font-medium text-dark-gray mb-0">Lorem ipsum dolor sit amet, consectetur
                        adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad
                        minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
                    </p>
                </div>
            </div>
            <div class="upload-box border border-[#474747] border-dashed rounded-[30px] p-6 mt-8">
                <h5 class="block font-semibold text-[#474747] mb-6">Uploaded Policy Document</h5>
                <div class="flex flex-wrap gap-6">
                    <!-- Uploaded files -->
                    <div class="item flex flex-col gap-4 justify-center items-center">
                        <div class="relative w-[88px] h-[117px] border border-[#888888] rounded-[5px] overflow-hidden">
                            <img src="./img/invoice.jpeg" class="w-full h-full object-cover" />
                            <span
                                class="img-type absolute left-0 top-0 block font-semibold bg-[#474747] text-white text-[10px] rounded-[6px] rounded-t-none rounded-l-none px-[8px] py-[3px]">
                                PDF
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="grid 2xl:grid-cols-4 lg:grid-cols-3 sm:grid-cols-2 grid-col-1 gap-x-3 gap-y-8 mt-8">
                <div class="item">
                    <span class="text-[16px] font-medium text-med-gray block mb-4">Claim Type</span>
                    <h6 class="text-[20px] font-semibold text-dark-gray mb-0">General Claims</h6>
                </div>
                <div class="item">
                    <span class="text-[16px] font-medium text-med-gray block mb-4">Estimated Claim Amount (AED)</span>
                    <h6 class="text-[20px] font-semibold text-dark-gray mb-0">AED 10000</h6>
                </div>

            </div>
            <div class="grid 2xl:grid-cols-4 lg:grid-cols-3 sm:grid-cols-2 grid-col-1 gap-x-3 gap-y-8 mt-8">
                <div class="item">
                    <span class="text-[16px] font-medium text-med-gray block mb-4">Contact Person</span>
                    <h6 class="text-[20px] font-semibold text-dark-gray mb-0">John Doe</h6>
                </div>
                <div class="item">
                    <span class="text-[16px] font-medium text-med-gray block mb-4">Contact Person Email</span>
                    <h6 class="text-[20px] font-semibold text-dark-gray mb-0">john.doe@alshirawi.com</h6>
                </div>
                <div class="item">
                    <span class="text-[16px] font-medium text-med-gray block mb-4">Contact Person Phone Number</span>
                    <h6 class="text-[20px] font-semibold text-dark-gray mb-0">+971 504473569</h6>
                </div>
            </div>
            <div class="mt-8">
                <custom-textarea label="Remarks" placeholder="Enter your remarks here"></custom-textarea>
            </div>
        </div>

        <div class="px-6 pb-6">
            <div class="grid md:flex md:justify-end gap-6">
                <custom-button matButton="outlined" label="Send Back"
                    (click)="goTo('/claims/claims-approvals')"></custom-button>
                <custom-button matButton="outlined" label="Reject"></custom-button>
                <custom-button matButton="filled" label="Approve" class="min-w-[185px]"
                    (click)="openConfirmation()"></custom-button>
            </div>
        </div>
    </custom-card>
</section>
<!-- Modal dialogue box for events -->
<ng-template #customTemplate>
    <div class="flex justify-between items-center  mb-8">
        <h3 class="text-[20px] text-[var(--primary)] font-semibold">Events</h3>
        <img class="cursor-pointer" src="./img/icon/cross.svg" alt="">
    </div>
    <div class="mat-elevation-z2 overflow-x-auto border-t border-t-[var(--card-border)]">
        <table mat-table [dataSource]="dataSource" class="mat-elevation-z8 custom-table ">
            <ng-container matColumnDef="Sno">
                <th mat-header-cell *matHeaderCellDef>Sl. No. </th>
                <td mat-cell *matCellDef="let element"> {{element.Sno}} </td>
            </ng-container>

            <ng-container matColumnDef="eventDate">
                <th mat-header-cell *matHeaderCellDef>Event Date </th>
                <td mat-cell *matCellDef="let element"> {{element.eventDate}} </td>
            </ng-container>

            <ng-container matColumnDef="eventTime">
                <th mat-header-cell *matHeaderCellDef>Event Time </th>
                <td mat-cell *matCellDef="let element"> {{element.eventTime}} </td>
            </ng-container>

            <ng-container matColumnDef="eventType">
                <th mat-header-cell *matHeaderCellDef> Event Type </th>
                <td mat-cell *matCellDef="let element">
                    <span class="text-primary font-semibold">{{element.eventType}}</span>
                </td>
            </ng-container>

            <ng-container matColumnDef="eventById">
                <th mat-header-cell *matHeaderCellDef>Event By ID </th>
                <td mat-cell *matCellDef="let element"> {{element.eventById}} </td>
            </ng-container>

            <ng-container matColumnDef="evnetName">
                <th mat-header-cell *matHeaderCellDef> Event Name</th>
                <td mat-cell *matCellDef="let element"> {{element.evnetName}} </td>
            </ng-container>

            <ng-container matColumnDef="approvalStatus">
                <th mat-header-cell *matHeaderCellDef> Approval Status </th>
                <td mat-cell *matCellDef="let element">
                    @if(element.approvalStatus === 'pending'){
                    <button (click)="goTo('/policy-request/aprrove-request/request-approval')"
                        class="status-button text-nowrap warning">
                        Pending
                    </button>
                    }
                    @if(element.approvalStatus === 'requested'){
                    <button (click)="goTo('/policy-request/aprrove-request/request-approval')"
                        class="status-button text-nowrap warning">
                        Request Generated
                    </button>
                    }
                    @if(element.approvalStatus === 'inprogress'){
                    <button (click)="goTo('/policy-request/aprrove-request/request-approval')"
                        class="status-button text-nowrap success">
                        Approval In Progress
                    </button>
                    }
                    @if(element.approvalStatus === 'approved'){
                    <button (click)="goTo('/policy-request/aprrove-request/request-approval')"
                        class="status-button text-nowrap success">
                        Approved
                    </button>
                    }
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
    </div>
    <div class="border-b border-b-[var(--card-border)] pb-6 mb-6 mt-8">
        <span class="text-[16px] font-medium text-med-gray block mb-4">Event Remarks</span>
        <p class="text-[16px] font-medium text-dark-gray mb-0">Lorem ipsum dolor sit, amet consectetur adipisicing
            elit. Nostrum laudantium nihil beatae, a accusamus, rerum dolores alias eveniet nulla odit tenetur ea
            voluptatum ratione expedita, enim nobis tempora in architecto.</p>
    </div>
</ng-template>