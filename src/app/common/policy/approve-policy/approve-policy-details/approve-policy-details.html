<page-header [breadcrumbs]="[
        { label: 'Insurance & Claims System'},
        { label: 'Policy' },
        { label: 'Approve Policy' }
    ]">
</page-header>
<section aria-label="Approve Policy">
    <h1 class="text-[var(--primary)] text-[24px] font-bold">Approve Policy</h1>
    <custom-card class="mt-4 !p-0 min-height">
        <div class="p-6 border-b border-b-[var(--card-border)]">
            <div class="flex justify-between relative">
                <img (click)="goTo('/policy/approve-policy')" src="img/back-btn.svg" alt="img" class="cursor-pointer" />
                <custom-button (click)="openTemplateDialog(customTemplate)"
                    class="!min-h-[20px] !h-[32px] !rounded-[6px] !font-medium" matButton="outlined"
                    label="Events"></custom-button>
            </div>
        </div>
        <div class="p-6 border-b border-b-[var(--card-border)]">
            <div class="grid 2xl:grid-cols-4 md:grid-cols-3 sm:grid-cols-2 grid-col-1 gap-x-3 gap-y-8">
                <div class="item">
                    <span class="text-[16px] font-medium text-med-gray block mb-4">Employee Number</span>
                    <h6 class="text-[20px] font-semibold text-dark-gray mb-0">EMP001</h6>
                </div>
                <div class="item">
                    <span class="text-[16px] font-medium text-med-gray block mb-4">Approval Status</span>
                    <h6 class="text-[20px] font-semibold text-dark-gray mb-0">Request Generated</h6>
                </div>
                <div class="item">
                    <span class="text-[16px] font-medium text-med-gray block mb-4">Approval Action</span>
                    <h6 class="text-[20px] font-semibold text-dark-gray mb-0">Pending at Unit HOD</h6>
                </div>
            </div>
            <div class="grid 2xl:grid-cols-4 md:grid-cols-3 sm:grid-cols-2 grid-col-1 gap-x-3 gap-y-8 mt-8">
                <div class="item">
                    <span class="text-[16px] font-medium text-med-gray block mb-4">In Time</span>
                    <h6 class="text-[20px] font-semibold text-dark-gray mb-0">10:00:00</h6>
                </div>
                <div class="item">
                    <span class="text-[16px] font-medium text-med-gray block mb-4">Out Time</span>
                    <h6 class="text-[20px] font-semibold text-dark-gray mb-0">10:02:30</h6>
                </div>
                <div class="item">
                    <span class="text-[16px] font-medium text-med-gray block mb-4">Time Taken</span>
                    <h6 class="text-[20px] font-semibold text-dark-gray mb-0">02:30</h6>
                </div>
            </div>
            <div class="grid 2xl:grid-cols-4 md:grid-cols-3 sm:grid-cols-2 grid-col-1 gap-x-3 gap-y-8 mt-8">
                <div class="item">
                    <span class="text-[16px] font-medium text-med-gray block mb-4">Company Code</span>
                    <h6 class="text-[20px] font-semibold text-dark-gray mb-0">12456</h6>
                </div>
                <div class="item">
                    <span class="text-[16px] font-medium text-med-gray block mb-4">Branch Code</span>
                    <h6 class="text-[20px] font-semibold text-dark-gray mb-0">46125</h6>
                </div>
                <div class="item">
                    <span class="text-[16px] font-medium text-med-gray block mb-4">Division Code</span>
                    <h6 class="text-[20px] font-semibold text-dark-gray mb-0">75921</h6>
                </div>
                <div class="item">
                    <span class="text-[16px] font-medium text-med-gray block mb-4">Company Code</span>
                    <h6 class="text-[20px] font-semibold text-dark-gray mb-0">123456</h6>
                </div>
                <div class="item">
                    <span class="text-[16px] font-medium text-med-gray block mb-4">Document Type</span>
                    <h6 class="text-[20px] font-semibold text-dark-gray mb-0">License Document</h6>
                </div>
            </div>
            <custom-file-upload label="Uploaded Document" accept=".pdf,.jpg,.png" [multiple]="true"
                (filesChanged)="onFilesChanged($event)">
            </custom-file-upload>
        </div>
        <div class="p-6 border-b border-b-[var(--card-border)]">
            <span class="text-[16px] font-medium text-med-gray block mb-4">Unit HOD Remarks</span>
            <p class="text-[16px] font-medium text-dark-gray mb-0">Lorem ipsum dolor sit amet, consectetur adipiscing
                elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis
                nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
        </div>
        <div class="p-6 border-b border-b-[var(--card-border)]">
            <span class="text-[16px] font-medium text-med-gray block mb-4">HO Insurance Coordinator Remarks</span>
            <p class="text-[16px] font-medium text-dark-gray mb-0">Lorem ipsum dolor sit amet, consectetur adipiscing
                elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis
                nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
        </div>
        <div class="p-6">
            <custom-textarea label="Remarks" placeholder="Enter your remarks here"></custom-textarea>
            <div class="grid md:flex md:justify-end gap-6 mt-4">
                <custom-button matButton="outlined" label="Send Back"
                    (click)="goTo('/policy-request/aprrove-request')"></custom-button>
                <custom-button matButton="outlined" label="Reject"></custom-button>
                <custom-button matButton="filled" label="Approve" class="min-w-[185px]"
                    (click)="openConfirmation()"></custom-button>
            </div>
        </div>
    </custom-card>
</section>

<!-- Modal dialogue box for events -->
<ng-template #customTemplate>
    <div class="flex justify-between items-center  mb-8">
        <h3 class="text-[20px] text-[var(--primary)] font-semibold">Events</h3>
        <img class="cursor-pointer" src="./img/icon/cross.svg" alt="">
    </div>
    <div class="mat-elevation-z2 overflow-x-auto border-t border-t-[var(--card-border)]">
        <table mat-table [dataSource]="dataSource" class="mat-elevation-z8 custom-table ">
            <ng-container matColumnDef="Sno">
                <th mat-header-cell *matHeaderCellDef>Sl. No. </th>
                <td mat-cell *matCellDef="let element"> {{element.Sno}} </td>
            </ng-container>

            <ng-container matColumnDef="eventDate">
                <th mat-header-cell *matHeaderCellDef>Event Date </th>
                <td mat-cell *matCellDef="let element"> {{element.eventDate}} </td>
            </ng-container>

            <ng-container matColumnDef="eventTime">
                <th mat-header-cell *matHeaderCellDef>Event Time </th>
                <td mat-cell *matCellDef="let element"> {{element.eventTime}} </td>
            </ng-container>

            <ng-container matColumnDef="eventType">
                <th mat-header-cell *matHeaderCellDef> Event Type </th>
                <td mat-cell *matCellDef="let element">
                    <span class="text-primary font-semibold">{{element.eventType}}</span>
                </td>
            </ng-container>

            <ng-container matColumnDef="eventById">
                <th mat-header-cell *matHeaderCellDef>Event By ID </th>
                <td mat-cell *matCellDef="let element"> {{element.eventById}} </td>
            </ng-container>

            <ng-container matColumnDef="evnetName">
                <th mat-header-cell *matHeaderCellDef> Event Name</th>
                <td mat-cell *matCellDef="let element"> {{element.evnetName}} </td>
            </ng-container>

            <ng-container matColumnDef="approvalStatus">
                <th mat-header-cell *matHeaderCellDef> Approval Status </th>
                <td mat-cell *matCellDef="let element">
                    @if(element.approvalStatus === 'pending'){
                    <button (click)="goTo('/policy-request/aprrove-request/request-approval')"
                        class="status-button text-nowrap warning">
                        Pending
                    </button>
                    }
                    @if(element.approvalStatus === 'requested'){
                    <button (click)="goTo('/policy-request/aprrove-request/request-approval')"
                        class="status-button text-nowrap warning">
                        Request Generated
                    </button>
                    }
                    @if(element.approvalStatus === 'inprogress'){
                    <button (click)="goTo('/policy-request/aprrove-request/request-approval')"
                        class="status-button text-nowrap success">
                        Approval In Progress
                    </button>
                    }
                    @if(element.approvalStatus === 'approved'){
                    <button (click)="goTo('/policy-request/aprrove-request/request-approval')"
                        class="status-button text-nowrap success">
                        Approved
                    </button>
                    }
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
    </div>
    <div class="border-b border-b-[var(--card-border)] pb-6 mb-6 mt-8">
        <span class="text-[16px] font-medium text-med-gray block mb-4">Event Remarks</span>
        <p class="text-[16px] font-medium text-dark-gray mb-0">Lorem ipsum dolor sit, amet consectetur adipisicing
            elit. Nostrum laudantium nihil beatae, a accusamus, rerum dolores alias eveniet nulla odit tenetur ea
            voluptatum ratione expedita, enim nobis tempora in architecto.</p>
    </div>
</ng-template>